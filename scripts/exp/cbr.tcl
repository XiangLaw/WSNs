# udp data

set opt(tn) 151
set opt(interval_1) 50.0
set opt(interval) 100.0

set s(0)	1303	;	set d(0)	487
set s(1)	1299	;	set d(1)	573
set s(2)	489	;	set d(2)	1254
set s(3)	1172	;	set d(3)	572
set s(4)	486	;	set d(4)	1211
set s(5)	1169	;	set d(5)	613
set s(6)	1251	;	set d(6)	530
set s(7)	1336	;	set d(7)	403
set s(8)	1382	;	set d(8)	491
set s(9)	531	;	set d(9)	1461
set s(10)	1298	;	set d(10)	574
set s(11)	1508	;	set d(11)	406
set s(12)	366	;	set d(12)	1293
set s(13)	1289	;	set d(13)	451
set s(14)	648	;	set d(14)	1332
set s(15)	1456	;	set d(15)	282
set s(16)	241	;	set d(16)	1455
set s(17)	405	;	set d(17)	1373
set s(18)	1378	;	set d(18)	409
set s(19)	369	;	set d(19)	1384
set s(20)	1511	;	set d(20)	493
set s(21)	1389	;	set d(21)	402
set s(22)	1543	;	set d(22)	196
set s(23)	161	;	set d(23)	1377
set s(24)	1453	;	set d(24)	204
set s(25)	163	;	set d(25)	1328
set s(26)	1244	;	set d(26)	331
set s(27)	290	;	set d(27)	1164
set s(28)	1125	;	set d(28)	332
set s(29)	456	;	set d(29)	1339
set s(30)	1120	;	set d(30)	415
set s(31)	1133	;	set d(31)	532
set s(32)	1464	;	set d(32)	242
set s(33)	118	;	set d(33)	1330
set s(34)	1417	;	set d(34)	203
set s(35)	537	;	set d(35)	1259
set s(36)	1426	;	set d(36)	116
set s(37)	1428	;	set d(37)	201
set s(38)	539	;	set d(38)	1204
set s(39)	1119	;	set d(39)	413
set s(40)	1010	;	set d(40)	372
set s(41)	291	;	set d(41)	1122
set s(42)	980	;	set d(42)	240
set s(43)	115	;	set d(43)	1084
set s(44)	1046	;	set d(44)	158
set s(45)	1556	;	set d(45)	111
set s(46)	1342	;	set d(46)	365
set s(47)	160	;	set d(47)	1252
set s(48)	280	;	set d(48)	1126
set s(49)	612	;	set d(49)	1089
set s(50)	569	;	set d(50)	1215
set s(51)	1588	;	set d(51)	283
set s(52)	1333	;	set d(52)	328
set s(53)	576	;	set d(53)	1253
set s(54)	363	;	set d(54)	1052
set s(55)	1083	;	set d(55)	447
set s(56)	1262	;	set d(56)	450
set s(57)	1217	;	set d(57)	329
set s(58)	164	;	set d(58)	1294
set s(59)	1094	;	set d(59)	608
set s(60)	526	;	set d(60)	1130
set s(61)	906	;	set d(61)	543
set s(62)	1601	;	set d(62)	63
set s(63)	58	;	set d(63)	1521
set s(64)	1483	;	set d(64)	134
set s(65)	172	;	set d(65)	1405
set s(66)	1529	;	set d(66)	138
set s(67)	379	;	set d(67)	1280
set s(68)	1278	;	set d(68)	589
set s(69)	508	;	set d(69)	1319
set s(70)	1440	;	set d(70)	350
set s(71)	384	;	set d(71)	1316
set s(72)	1109	;	set d(72)	425
set s(73)	505	;	set d(73)	1366
set s(74)	1399	;	set d(74)	388
set s(75)	132	;	set d(75)	1477
set s(76)	1605	;	set d(76)	179
set s(77)	300	;	set d(77)	1359
set s(78)	1396	;	set d(78)	226
set s(79)	1268	;	set d(79)	263
set s(80)	140	;	set d(80)	1309
set s(81)	1115	;	set d(81)	550
set s(82)	668	;	set d(82)	1004
set s(83)	969	;	set d(83)	808
set s(84)	704	;	set d(84)	1156
set s(85)	902	;	set d(85)	777
set s(86)	932	;	set d(86)	674
set s(87)	594	;	set d(87)	1071
set s(88)	772	;	set d(88)	909
set s(89)	837	;	set d(89)	699
set s(90)	621	;	set d(90)	875
set s(91)	511	;	set d(91)	1361
set s(92)	1232	;	set d(92)	515
set s(93)	261	;	set d(93)	1313
set s(94)	1434	;	set d(94)	228
set s(95)	152	;	set d(95)	1255
set s(96)	458	;	set d(96)	1383
set s(97)	374	;	set d(97)	1343
set s(98)	1471	;	set d(98)	368
set s(99)	327	;	set d(99)	1424
set s(100)	1340	;	set d(100)	614
set s(101)	496	;	set d(101)	1209
set s(102)	1206	;	set d(102)	457
set s(103)	658	;	set d(103)	1082
set s(104)	979	;	set d(104)	582
set s(105)	66	;	set d(105)	1551
set s(106)	1590	;	set d(106)	72
set s(107)	70	;	set d(107)	1422
set s(108)	1537	;	set d(108)	120
set s(109)	52	;	set d(109)	1566
set s(110)	1078	;	set d(110)	619
set s(111)	146	;	set d(111)	1597
set s(112)	149	;	set d(112)	1510
set s(113)	145	;	set d(113)	1519
set s(114)	268	;	set d(114)	1393
set s(115)	347	;	set d(115)	1401
set s(116)	471	;	set d(116)	1321
set s(117)	110	;	set d(117)	1381
set s(118)	323	;	set d(118)	1214
set s(119)	495	;	set d(119)	1216
set s(120)	247	;	set d(120)	1296
set s(121)	1499	;	set d(121)	404
set s(122)	212	;	set d(122)	1573
set s(123)	302	;	set d(123)	1485
set s(124)	267	;	set d(124)	1607
set s(125)	1592	;	set d(125)	577
set s(126)	942	;	set d(126)	410
set s(127)	1162	;	set d(127)	330
set s(128)	287	;	set d(128)	1213
set s(129)	449	;	set d(129)	1539
set s(130)	223	;	set d(130)	1398
set s(131)	561	;	set d(131)	1188
set s(132)	946	;	set d(132)	494
set s(133)	1017	;	set d(133)	289
set s(134)	535	;	set d(134)	1090
set s(135)	731	;	set d(135)	1081
set s(136)	498	;	set d(136)	1170
set s(137)	1372	;	set d(137)	412
set s(138)	1665	;	set d(138)	1295
set s(139)	1287	;	set d(139)	370
set s(140)	1338	;	set d(140)	198
set s(141)	464	;	set d(141)	1153
set s(142)	306	;	set d(142)	1478
set s(143)	142	;	set d(143)	1353
set s(144)	1000	;	set d(144)	779
set s(145)	872	;	set d(145)	829
set s(146)	500	;	set d(146)	1205
set s(147)	912	;	set d(147)	768
set s(148)	828	;	set d(148)	843
set s(149)	747	;	set d(149)	1035
set s(150)	194	;	set d(150)	1256

for {set i 0} {$i < $opt(tn)} {incr i} {
    $mnode_($s($i)) setdest [$mnode_($d($i)) set X_] [$mnode_($d($i)) set Y_] 0

    set sink_($i) [new Agent/Null]
    set udp_($i) [new Agent/UDP]
    $ns_ attach-agent $mnode_($d($i)) $sink_($i)
    $ns_ attach-agent $mnode_($s($i)) $udp_($i)
    $ns_ connect $udp_($i) $sink_($i)
    $udp_($i) set fid_ 2

    #Setup a CBR over UDP connection
    set cbr_($i) [new Application/Traffic/CBR]
    $cbr_($i) attach-agent $udp_($i)
    $cbr_($i) set type_ CBR
    $cbr_($i) set packet_size_ 50
    $cbr_($i) set rate_ 0.1Mb
    $cbr_($i) set interval_ $opt(interval_1)
    #$cbr set random_ false

    $ns_ at [expr 100 + [expr $i - 1] * $opt(interval_1) / $opt(tn)] "$cbr_($i) start"
    $ns_ at 199 "$cbr_($i) stop"

    # Setup a CBR over UDP connection
    set cbr2_($i) [new Application/Traffic/CBR]
    $cbr2_($i) attach-agent $udp_($i)
    $cbr2_($i) set type_ CBR
    $cbr2_($i) set packet_size_ 50
    $cbr2_($i) set rate_ 0.1Mb
    $cbr2_($i) set interval_ $opt(interval)

    $ns_ at [expr 200 + [expr $i - 1] * $opt(interval) / $opt(tn)] "$cbr2_($i) start"
    $ns_ at [expr $opt(stop) - 5] "$cbr2_($i) stop"
}
