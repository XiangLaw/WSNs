# udp data

set opt(tn) 100
set opt(interval_1) 50.0
set opt(interval) 20.0

set s(0)	1253	;	set d(0)	557
set s(1)	475	;	set d(1)	1293
set s(2)	1294	;	set d(2)	520
set s(3)	1169	;	set d(3)	640
set s(4)	553	;	set d(4)	1085
set s(5)	1171	;	set d(5)	599
set s(6)	637	;	set d(6)	1087
set s(7)	1172	;	set d(7)	558
set s(8)	473	;	set d(8)	1130
set s(9)	1088	;	set d(9)	681
set s(10)	639	;	set d(10)	1047
set s(11)	970	;	set d(11)	720
set s(12)	555	;	set d(12)	1006
set s(13)	1048	;	set d(13)	680
set s(14)	513	;	set d(14)	1170
set s(15)	1255	;	set d(15)	474
set s(16)	434	;	set d(16)	1337
set s(17)	394	;	set d(17)	1295
set s(18)	391	;	set d(18)	1254
set s(19)	470	;	set d(19)	1129
set s(20)	1214	;	set d(20)	597
set s(21)	1173	;	set d(21)	515
set s(22)	1131	;	set d(22)	469
set s(23)	551	;	set d(23)	1128
set s(24)	1089	;	set d(24)	596
set s(25)	552	;	set d(25)	1213
set s(26)	1713	;	set d(26)	1090
set s(27)	429	;	set d(27)	1298
set s(28)	1257	;	set d(28)	431
set s(29)	390	;	set d(29)	1296
set s(30)	262	;	set d(30)	1299
set s(31)	388	;	set d(31)	1259
set s(32)	483	;	set d(32)	1376
set s(33)	1416	;	set d(33)	400
set s(34)	315	;	set d(34)	1372
set s(35)	1412	;	set d(35)	318
set s(36)	314	;	set d(36)	1452
set s(37)	450	;	set d(37)	1323
set s(38)	1321	;	set d(38)	535
set s(39)	494	;	set d(39)	1277
set s(40)	661	;	set d(40)	1193
set s(41)	570	;	set d(41)	1151
set s(42)	1190	;	set d(42)	531
set s(43)	489	;	set d(43)	1107
set s(44)	988	;	set d(44)	660
set s(45)	619	;	set d(45)	1066
set s(46)	1104	;	set d(46)	490
set s(47)	408	;	set d(47)	1150
set s(48)	1191	;	set d(48)	493
set s(49)	410	;	set d(49)	1194
set s(50)	1237	;	set d(50)	618
set s(51)	537	;	set d(51)	1283
set s(52)	1367	;	set d(52)	533
set s(53)	662	;	set d(53)	1235
set s(54)	1274	;	set d(54)	534
set s(55)	453	;	set d(55)	1276
set s(56)	1272	;	set d(56)	528
set s(57)	447	;	set d(57)	1192
set s(58)	1234	;	set d(58)	366
set s(59)	369	;	set d(59)	1279
set s(60)	1361	;	set d(60)	491
set s(61)	495	;	set d(61)	1358
set s(62)	1401	;	set d(62)	452
set s(63)	325	;	set d(63)	1362
set s(64)	1445	;	set d(64)	617
set s(65)	577	;	set d(65)	1147
set s(66)	317	;	set d(66)	1408
set s(67)	430	;	set d(67)	1127
set s(68)	1174	;	set d(68)	385
set s(69)	1380	;	set d(69)	350
set s(70)	260	;	set d(70)	1251
set s(71)	182	;	set d(71)	1252
set s(72)	677	;	set d(72)	1046
set s(73)	751	;	set d(73)	969
set s(74)	849	;	set d(74)	934
set s(75)	813	;	set d(75)	898
set s(76)	865	;	set d(76)	816
set s(77)	1009	;	set d(77)	753
set s(78)	1008	;	set d(78)	718
set s(79)	1007	;	set d(79)	554
set s(80)	1175	;	set d(80)	514
set s(81)	1424	;	set d(81)	518
set s(82)	435	;	set d(82)	1421
set s(83)	1086	;	set d(83)	471
set s(84)	301	;	set d(84)	1211
set s(85)	932	;	set d(85)	717
set s(86)	676	;	set d(86)	896
set s(87)	971	;	set d(87)	594
set s(88)	363	;	set d(88)	1240
set s(89)	1281	;	set d(89)	527
set s(90)	446	;	set d(90)	1152
set s(91)	411	;	set d(91)	1111
set s(92)	413	;	set d(92)	1156
set s(93)	1315	;	set d(93)	487
set s(94)	406	;	set d(94)	1148
set s(95)	1340	;	set d(95)	476
set s(96)	436	;	set d(96)	1292
set s(97)	351	;	set d(97)	1336
set s(98)	1417	;	set d(98)	522
set s(99)	347	;	set d(99)	1210
set s(100)	1378	;	set d(100)	428
set s(101)	467	;	set d(101)	1212
set s(102)	1300	;	set d(102)	432
set s(103)	387	;	set d(103)	1339

set opt(cbr_start_1_) 100.0
set opt(cbr_start_) 200.0


for {set i 0} {$i < $opt(tn)} {incr i} {
    $mnode_($s($i)) setdest [$mnode_($d($i)) set X_] [$mnode_($d($i)) set Y_] 0

    set sink_($i) [new Agent/Null]
    set udp_($i) [new Agent/UDP]
    $ns_ attach-agent $mnode_($d($i)) $sink_($i)
    $ns_ attach-agent $mnode_($s($i)) $udp_($i)
    $ns_ connect $udp_($i) $sink_($i)
    $udp_($i) set fid_ 2

    #Setup a CBR over UDP connection
    set cbr_($i) [new Application/Traffic/CBR]
    $cbr_($i) attach-agent $udp_($i)
    $cbr_($i) set type_ CBR
    $cbr_($i) set packet_size_ 50
    $cbr_($i) set rate_ 0.1Mb
    $cbr_($i) set interval_ $opt(interval_1)
    #$cbr set random_ false

    $ns_ at [expr $opt(cbr_start_1_) + [expr $i - 1] * $opt(interval_1) / $opt(tn)] "$cbr_($i) start"
    $ns_ at [expr $opt(cbr_start_1_) + 99] "$cbr_($i) stop"

    # Setup a CBR over UDP connection
    set cbr2_($i) [new Application/Traffic/CBR]
    $cbr2_($i) attach-agent $udp_($i)
    $cbr2_($i) set type_ CBR
    $cbr2_($i) set packet_size_ 50
    $cbr2_($i) set rate_ 0.1Mb
    $cbr2_($i) set interval_ $opt(interval)

    $ns_ at [expr $opt(cbr_start_) + [expr $i - 1] * $opt(interval) / $opt(tn)] "$cbr2_($i) start"
    $ns_ at [expr $opt(stop) - 5] "$cbr2_($i) stop"
}
