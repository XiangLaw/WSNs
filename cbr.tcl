#Setup a UDP connection

set tn 270	;# s-d number

set s(1)	13	;	set d(1)	850
set s(2)	107	;	set d(2)	913
set s(3)	180	;	set d(3)	914
set s(4)	183	;	set d(4)	951
set s(5)	186	;	set d(5)	952
set s(6)	63	;	set d(6)	48
set s(7)	250	;	set d(7)	101
set s(8)	284	;	set d(8)	161
set s(9)	428	;	set d(9)	237
set s(10)	511	;	set d(10)	247
set s(11)	91	;	set d(11)	89
set s(12)	108	;	set d(12)	92
set s(13)	122	;	set d(13)	216
set s(14)	233	;	set d(14)	248
set s(15)	309	;	set d(15)	291
set s(16)	297	;	set d(16)	124
set s(17)	504	;	set d(17)	285
set s(18)	570	;	set d(18)	315
set s(19)	571	;	set d(19)	384
set s(20)	573	;	set d(20)	472
set s(21)	27	;	set d(21)	6
set s(22)	80	;	set d(22)	119
set s(23)	118	;	set d(23)	246
set s(24)	173	;	set d(24)	326
set s(25)	386	;	set d(25)	387
set s(26)	5	;	set d(26)	559
set s(27)	190	;	set d(27)	560
set s(28)	195	;	set d(28)	1417
set s(29)	206	;	set d(29)	1442
set s(30)	251	;	set d(30)	1498
set s(31)	12	;	set d(31)	117
set s(32)	45	;	set d(32)	422
set s(33)	66	;	set d(33)	446
set s(34)	72	;	set d(34)	592
set s(35)	96	;	set d(35)	593
set s(36)	133	;	set d(36)	49
set s(37)	404	;	set d(37)	181
set s(38)	748	;	set d(38)	620
set s(39)	749	;	set d(39)	621
set s(40)	751	;	set d(40)	630
set s(41)	14	;	set d(41)	196
set s(42)	86	;	set d(42)	209
set s(43)	137	;	set d(43)	283
set s(44)	154	;	set d(44)	353
set s(45)	275	;	set d(45)	391
set s(46)	132	;	set d(46)	0
set s(47)	268	;	set d(47)	364
set s(48)	327	;	set d(48)	484
set s(49)	339	;	set d(49)	530
set s(50)	363	;	set d(50)	851
set s(51)	8	;	set d(51)	1196
set s(52)	19	;	set d(52)	1250
set s(53)	50	;	set d(53)	1428
set s(54)	104	;	set d(54)	1440
set s(55)	155	;	set d(55)	1441
set s(56)	28	;	set d(56)	62
set s(57)	69	;	set d(57)	94
set s(58)	164	;	set d(58)	305
set s(59)	204	;	set d(59)	396
set s(60)	261	;	set d(60)	400
set s(61)	26	;	set d(61)	9
set s(62)	29	;	set d(62)	55
set s(63)	54	;	set d(63)	176
set s(64)	70	;	set d(64)	568
set s(65)	227	;	set d(65)	569
set s(66)	24	;	set d(66)	52
set s(67)	47	;	set d(67)	71
set s(68)	58	;	set d(68)	215
set s(69)	99	;	set d(69)	451
set s(70)	114	;	set d(70)	557
set s(71)	3	;	set d(71)	59
set s(72)	39	;	set d(72)	97
set s(73)	100	;	set d(73)	171
set s(74)	120	;	set d(74)	175
set s(75)	235	;	set d(75)	406
set s(76)	2	;	set d(76)	830
set s(77)	17	;	set d(77)	864
set s(78)	123	;	set d(78)	941
set s(79)	211	;	set d(79)	942
set s(80)	304	;	set d(80)	983
set s(81)	67	;	set d(81)	33
set s(82)	87	;	set d(82)	130
set s(83)	135	;	set d(83)	271
set s(84)	185	;	set d(84)	369
set s(85)	256	;	set d(85)	374
set s(86)	34	;	set d(86)	68
set s(87)	652	;	set d(87)	225
set s(88)	653	;	set d(88)	348
set s(89)	654	;	set d(89)	439
set s(90)	655	;	set d(90)	473
set s(91)	16	;	set d(91)	221
set s(92)	116	;	set d(92)	224
set s(93)	125	;	set d(93)	254
set s(94)	147	;	set d(94)	321
set s(95)	368	;	set d(95)	403
set s(96)	88	;	set d(96)	93
set s(97)	167	;	set d(97)	138
set s(98)	330	;	set d(98)	187
set s(99)	361	;	set d(99)	266
set s(100)	431	;	set d(100)	287
set s(101)	447	;	set d(101)	433
set s(102)	552	;	set d(102)	523
set s(103)	553	;	set d(103)	562
set s(104)	554	;	set d(104)	585
set s(105)	561	;	set d(105)	586
set s(106)	563	;	set d(106)	613
set s(107)	564	;	set d(107)	614
set s(108)	600	;	set d(108)	615
set s(109)	601	;	set d(109)	616
set s(110)	603	;	set d(110)	618
set s(111)	672	;	set d(111)	656
set s(112)	680	;	set d(112)	657
set s(113)	1182	;	set d(113)	810
set s(114)	1183	;	set d(114)	1045
set s(115)	1296	;	set d(115)	1081
set s(116)	419	;	set d(116)	853
set s(117)	423	;	set d(117)	854
set s(118)	457	;	set d(118)	902
set s(119)	572	;	set d(119)	903
set s(120)	574	;	set d(120)	1282
set s(121)	365	;	set d(121)	328
set s(122)	506	;	set d(122)	333
set s(123)	577	;	set d(123)	335
set s(124)	578	;	set d(124)	468
set s(125)	579	;	set d(125)	471
set s(126)	174	;	set d(126)	331
set s(127)	212	;	set d(127)	354
set s(128)	249	;	set d(128)	414
set s(129)	416	;	set d(129)	500
set s(130)	727	;	set d(130)	843
set s(131)	1034	;	set d(131)	402
set s(132)	1107	;	set d(132)	839
set s(133)	1108	;	set d(133)	840
set s(134)	1109	;	set d(134)	923
set s(135)	1110	;	set d(135)	925
set s(136)	319	;	set d(136)	835
set s(137)	510	;	set d(137)	836
set s(138)	795	;	set d(138)	929
set s(139)	796	;	set d(139)	930
set s(140)	797	;	set d(140)	935
set s(141)	395	;	set d(141)	443
set s(142)	476	;	set d(142)	831
set s(143)	533	;	set d(143)	832
set s(144)	825	;	set d(144)	931
set s(145)	826	;	set d(145)	932
set s(146)	611	;	set d(146)	528
set s(147)	612	;	set d(147)	555
set s(148)	1091	;	set d(148)	556
set s(149)	1092	;	set d(149)	1097
set s(150)	1121	;	set d(150)	1099
set s(151)	857	;	set d(151)	317
set s(152)	1075	;	set d(152)	461
set s(153)	1076	;	set d(153)	565
set s(154)	1079	;	set d(154)	566
set s(155)	1080	;	set d(155)	567
set s(156)	503	;	set d(156)	681
set s(157)	507	;	set d(157)	1087
set s(158)	812	;	set d(158)	1088
set s(159)	814	;	set d(159)	1089
set s(160)	855	;	set d(160)	1090
set s(161)	852	;	set d(161)	420
set s(162)	908	;	set d(162)	496
set s(163)	909	;	set d(163)	531
set s(164)	910	;	set d(164)	576
set s(165)	911	;	set d(165)	580
set s(166)	331	;	set d(166)	174
set s(167)	354	;	set d(167)	212
set s(168)	414	;	set d(168)	249
set s(169)	500	;	set d(169)	416
set s(170)	843	;	set d(170)	727
set s(171)	402	;	set d(171)	1034
set s(172)	839	;	set d(172)	1107
set s(173)	840	;	set d(173)	1108
set s(174)	923	;	set d(174)	1109
set s(175)	925	;	set d(175)	1110
set s(176)	835	;	set d(176)	319
set s(177)	836	;	set d(177)	510
set s(178)	929	;	set d(178)	795
set s(179)	930	;	set d(179)	796
set s(180)	935	;	set d(180)	797
set s(181)	443	;	set d(181)	395
set s(182)	831	;	set d(182)	476
set s(183)	832	;	set d(183)	533
set s(184)	931	;	set d(184)	825
set s(185)	932	;	set d(185)	826
set s(186)	911	;	set d(186)	846
set s(187)	912	;	set d(187)	917
set s(188)	918	;	set d(188)	948
set s(189)	988	;	set d(189)	949
set s(190)	989	;	set d(190)	950
set s(191)	855	;	set d(191)	841
set s(192)	856	;	set d(192)	842
set s(193)	901	;	set d(193)	1056
set s(194)	1233	;	set d(194)	1073
set s(195)	1276	;	set d(195)	1158
set s(196)	1080	;	set d(196)	838
set s(197)	1238	;	set d(197)	928
set s(198)	1239	;	set d(198)	957
set s(199)	1240	;	set d(199)	958
set s(200)	49	;	set d(200)	1115
set s(201)	1121	;	set d(201)	833
set s(202)	1122	;	set d(202)	834
set s(203)	1123	;	set d(203)	937
set s(204)	1124	;	set d(204)	984
set s(205)	1125	;	set d(205)	1213
set s(206)	495	;	set d(206)	490
set s(207)	498	;	set d(207)	514
set s(208)	551	;	set d(208)	828
set s(209)	558	;	set d(209)	829
set s(210)	559	;	set d(210)	830
set s(211)	1099	;	set d(211)	822
set s(212)	1157	;	set d(212)	823
set s(213)	1189	;	set d(213)	824
set s(214)	1390	;	set d(214)	877
set s(215)	1391	;	set d(215)	1321
set s(216)	567	;	set d(216)	774
set s(217)	602	;	set d(217)	858
set s(218)	671	;	set d(218)	859
set s(219)	1176	;	set d(219)	860
set s(220)	1181	;	set d(220)	1175
set s(221)	1090	;	set d(221)	740
set s(222)	1103	;	set d(222)	741
set s(223)	1104	;	set d(223)	747
set s(224)	1245	;	set d(224)	750
set s(225)	1246	;	set d(225)	1256
set s(226)	580	;	set d(226)	706
set s(227)	581	;	set d(227)	707
set s(228)	700	;	set d(228)	729
set s(229)	701	;	set d(229)	730
set s(230)	1317	;	set d(230)	732
set s(231)	843	;	set d(231)	1286
set s(232)	844	;	set d(232)	1287
set s(233)	920	;	set d(233)	1288
set s(234)	1049	;	set d(234)	1293
set s(235)	1050	;	set d(235)	67
set s(236)	925	;	set d(236)	1234
set s(237)	926	;	set d(237)	1236
set s(238)	927	;	set d(238)	1241
set s(239)	944	;	set d(239)	1242
set s(240)	946	;	set d(240)	1243
set s(241)	935	;	set d(241)	1126
set s(242)	985	;	set d(242)	1127
set s(243)	1015	;	set d(243)	1128
set s(244)	1114	;	set d(244)	1129
set s(245)	1116	;	set d(245)	1130
set s(246)	932	;	set d(246)	587
set s(247)	933	;	set d(247)	590
set s(248)	934	;	set d(248)	1083
set s(249)	938	;	set d(249)	1084
set s(250)	939	;	set d(250)	88
set s(251)	826	;	set d(251)	1082
set s(252)	827	;	set d(252)	1156
set s(253)	862	;	set d(253)	1184
set s(254)	863	;	set d(254)	1191
set s(255)	1323	;	set d(255)	1192
set s(256)	797	;	set d(256)	1098
set s(257)	818	;	set d(257)	1100
set s(258)	1162	;	set d(258)	1101
set s(259)	1163	;	set d(259)	1102
set s(260)	1164	;	set d(260)	1105
set s(261)	1110	;	set d(261)	1303
set s(262)	1111	;	set d(262)	1304
set s(263)	1254	;	set d(263)	1305
set s(264)	1255	;	set d(264)	1378
set s(265)	1328	;	set d(265)	1379
set s(266)	727	;	set d(266)	575
set s(267)	731	;	set d(267)	584
set s(268)	733	;	set d(268)	1033
set s(269)	734	;	set d(269)	1248
set s(270)	735	;	set d(270)	1320


for {set i 1} {$i <= $tn} {incr i} {
	set sink_($i) [new Agent/Null]
	$ns_ attach-agent $mnode_($d($i)) $sink_($i)

	set udp_($i) [new Agent/UDP]
	$mnode_($s($i)) setdest [$mnode_($d($i)) set X_] [$mnode_($d($i)) set Y_] 0
	$ns_ attach-agent $mnode_($s($i)) $udp_($i)
	$ns_ connect $udp_($i) $sink_($i)
	$udp_($i) set fid_ 2
	
	#Setup a CBR over UDP connection
	set cbr_($i) [new Application/Traffic/CBR]
	$cbr_($i) attach-agent $udp_($i)
	$cbr_($i) set type_ CBR
	$cbr_($i) set packet_size_ 50
	$cbr_($i) set rate_ 0.1Mb
	$cbr_($i) set interval_ 27
	#$cbr set random_ false
	
	$ns_ at "100.$i" "$cbr_($i) start"
	$ns_ at [expr $opt(stop) - 5] "$cbr_($i) stop"
}
